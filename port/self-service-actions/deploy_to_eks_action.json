{
  "identifier": "deploy_to_eks",
  "title": "Deploy to EKS",
  "description": "Build and deploy an image to EKS",
  "trigger": {
    "type": "self-service",
    "operation": "DAY-2",
    "userInputs": {
      "properties": {
        "service": {
          "icon": "DefaultProperty",
          "title": "Service",
          "description": "The service you'd like to deploy on EKS",
          "type": "string",
          "blueprint": "service",
          "format": "entity"
        },
        "cluster": {
          "icon": "DefaultProperty",
          "title": "EKS Cluster",
          "description": "Select the EKS cluster for deployment",
          "type": "string",
          "blueprint": "eks",
          "format": "entity"
        }
      },
      "required": [
        "service",
        "cluster"
      ],
      "order": [
        "service",
        "cluster"
      ]
    }
  },
  "invocationMethod": {
    "type": "GITHUB",
    "org": "Porterview",
    "repo": "eks-deploy-guide",
    "workflow": "build-and-deploy.yml",
    "workflowInputs": {
      "ref": "main",
      "repo_url": "{{ .inputs.service.properties.repo_url }}",
      "cluster": "{{ .inputs.cluster.identifier }}",
      "port_context": {
        "entity": "{{ .entity }}",
        "blueprint": "{{ .action.blueprint }}",
        "runId": "{{ .run.id }}",
        "trigger": "{{ .trigger }}"
      }
    },
    "reportWorkflowStatus": true
  },
  "requiredApproval": false,
  "icon": "Deployment"
}
